{"ast":null,"code":"var _jsxFileName = \"/home/mshahzaib/Desktop/upworkRobinKohzeProject/walletProject/wallet/components/profile/DynamicDialog.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState, useRef } from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Slide from \"@material-ui/core/Slide\";\nimport firebase from \"../../config/fire-conf\";\nimport CustomLoader from \"../Layouts/CustomLoader\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport { updateUserDataAction } from \"../../store/actions/actiosMain\";\nimport UpdateImagePortrait from \"./UpdateImagePortrait\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport WithdrawComponent from \"./WithdrawComponent\";\nconst Transition = /*#__PURE__*/React.forwardRef(function Transition(props, ref) {\n  return __jsx(Slide, _extends({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 10\n    }\n  }));\n});\nexport default function DynamicDialog(props) {\n  const {\n    0: userNameField,\n    1: setuserNameField\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setloading\n  } = useState(false);\n  const {\n    0: emailField,\n    1: setemailField\n  } = useState(\"\");\n  const {\n    0: ucurrentPasswordField,\n    1: setucurrentPasswordField\n  } = useState(\"\");\n  const {\n    0: unewPasswordField,\n    1: setunewPasswordField\n  } = useState(\"\");\n  const {\n    0: imageFile,\n    1: setimageFile\n  } = useState([]);\n  const dispatch = useDispatch();\n  const router = useRouter();\n\n  const handleClose = () => {\n    props.setdialogState(false);\n  };\n\n  const validateEmail = email => {\n    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  const updateUsername = () => {\n    setloading(true);\n\n    if (userNameField === \"\") {\n      toast.error(\"Please provide a Username\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      setloading(false);\n    } else {\n      var updateUser = firebase.auth().currentUser;\n      updateUser.updateProfile({\n        displayName: userNameField\n      }).then(() => {\n        toast.success(\"Username updated Successfully\", {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n        handleClose();\n        setuserNameField(\"\");\n      }).catch(function (error) {\n        toast.error(error.message, {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n      });\n    }\n  };\n\n  const updateUserEmail = () => {\n    setloading(true);\n    let pass = true;\n\n    if (!validateEmail(emailField)) {\n      toast.error(\"Please provide a valid Email Address\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      pass = false;\n    }\n\n    if (ucurrentPasswordField === \"\") {\n      toast.error(\"Please provide your current Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      pass = false;\n    }\n\n    if (!pass) {\n      setloading(false);\n    } else {\n      //signning the user\n      firebase.auth().signInWithEmailAndPassword(props.userEmail, ucurrentPasswordField).then(() => {\n        //updating email\n        var user = firebase.auth().currentUser;\n        return user.updateEmail(emailField);\n      }).then(() => {\n        // Update successful.\n        toast.success(\"User Email Updated Successfully\", {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n        handleClose();\n        setemailField(\"\");\n        setucurrentPasswordField(\"\");\n      }).catch(error => {\n        toast.error(error.message, {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n      });\n    }\n  };\n\n  const updateUserPassword = () => {\n    setloading(true);\n    let pass = true;\n\n    if (unewPasswordField === \"\") {\n      toast.error(\"Please provide your new Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      pass = false;\n    }\n\n    if (ucurrentPasswordField === \"\") {\n      toast.error(\"Please provide your current Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      pass = false;\n    }\n\n    if (!pass) {\n      setloading(false);\n    } else {\n      //signning the user\n      firebase.auth().signInWithEmailAndPassword(props.userEmail, ucurrentPasswordField).then(() => {\n        //updating email\n        var user = firebase.auth().currentUser;\n        return user.updatePassword(unewPasswordField);\n      }).then(() => {\n        // Update successful.\n        toast.success(\"User Password Updated Successfully\", {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n        handleClose();\n        setunewPasswordField(\"\");\n        setucurrentPasswordField(\"\");\n      }).catch(error => {\n        toast.error(error.message, {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n      });\n    }\n  };\n\n  const updateUserAccount = () => {\n    setloading(true);\n    let pass = true;\n\n    if (ucurrentPasswordField === \"\") {\n      toast.error(\"Please provide your current Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n      pass = false;\n    }\n\n    if (!pass) {\n      setloading(false);\n    } else {\n      //signning the user\n      firebase.auth().signInWithEmailAndPassword(props.userEmail, ucurrentPasswordField).then(() => {\n        //updating email\n        var user = firebase.auth().currentUser;\n        return user.delete();\n      }).then(() => {\n        // Update successful.\n        toast.success(\"User Account Deleted Successfully\", {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n        handleClose();\n        setucurrentPasswordField(\"\");\n        dispatch(updateUserDataAction(null));\n        router.push(\"/\");\n      }).catch(error => {\n        toast.error(error.message, {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n        setloading(false);\n      });\n    }\n  };\n\n  const updateUserPhoto = async () => {\n    setloading(true);\n    let pass = true;\n\n    if (imageFile[0]) {\n      //pushing image to DB\n      let storage = firebase.storage();\n      let modefiedURL = `https://firebasestorage.googleapis.com/v0/b/vaionexdev.appspot.com/o/profile_images%2F${props.uid}?alt=media`;\n      await storage.ref().child(`profile_images/${props.uid}`).put(imageFile[0].originFileObj);\n      props.setprofileImg(modefiedURL);\n      let currentuser = firebase.auth().currentUser;\n      currentuser.updateProfile({\n        photoURL: modefiedURL\n      }).then(function () {\n        setloading(false);\n        handleClose();\n        toast.success(\"Image Uploaded Succesfully\", {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      }).catch(error => {\n        setloading(false);\n        toast.error(\"Error Occured!\", {\n          position: \"bottom-left\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    } else {\n      setloading(false);\n      toast.error(\"Please provide Profile Image\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true\n      });\n    }\n  };\n\n  return __jsx(Dialog, {\n    open: props.dialogState,\n    TransitionComponent: Transition,\n    keepMounted: true,\n    onClose: handleClose,\n    \"aria-labelledby\": \"alert-dialog-slide-title\",\n    \"aria-describedby\": \"alert-dialog-slide-description\",\n    fullWidth: true,\n    style: {\n      zIndex: 100\n    },\n    maxWidth: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 5\n    }\n  }, __jsx(\"h5\", {\n    style: {\n      padding: \"18px 24px 5px 24px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }\n  }, (() => {\n    if (props.dialogType === \"export\") {\n      return \"Backup Your Wallet\";\n    } else if (props.dialogType === \"update-username\") {\n      return \"Update UserName\";\n    } else if (props.dialogType === \"update-email\") {\n      return \"Update Email\";\n    } else if (props.dialogType === \"update-password\") {\n      return \"Update Password\";\n    } else if (props.dialogType === \"update-account\") {\n      return \"Delete Account\";\n    } else if (props.dialogType === \"update-image\") {\n      return \"Add an account photo\";\n    } else if (props.dialogType === \"withdraw\") {\n      return \"Withdraw Amount\";\n    }\n  })()), __jsx(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }\n  }, (() => {\n    if (props.dialogType === \"export\") {\n      return __jsx(React.Fragment, null, __jsx(\"p\", {\n        style: {\n          marginBottom: \"0.2rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 17\n        }\n      }, \"Please write down your backup phrase to secure your wallet.\"), __jsx(\"p\", {\n        style: {\n          marginTop: 0,\n          color: \"#0e314c\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 17\n        }\n      }, \"rent all smooth flame increase ketchup catalog moon room wasp twice media\"));\n    } else if (props.dialogType === \"update-username\") {\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 19\n        }\n      }, \"UserName\"), __jsx(\"input\", {\n        onChange: e => {\n          setuserNameField(e.target.value);\n        },\n        type: \"text\",\n        className: \"form-control\",\n        defaultValue: \"\",\n        placeholder: \"Enter your Display Name\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 19\n        }\n      })));\n    } else if (props.dialogType === \"update-email\") {\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 19\n        }\n      }, \"New Email\"), __jsx(\"input\", {\n        onChange: e => {\n          setemailField(e.target.value);\n        },\n        type: \"email\",\n        className: \"form-control\",\n        defaultValue: \"\",\n        placeholder: \"Enter your New Email Address\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 19\n        }\n      })), __jsx(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 19\n        }\n      }, \"Current Password\"), __jsx(\"input\", {\n        onChange: e => {\n          setucurrentPasswordField(e.target.value);\n        },\n        type: \"password\",\n        className: \"form-control\",\n        defaultValue: \"\",\n        placeholder: \"Enter your Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 19\n        }\n      })));\n    } else if (props.dialogType === \"update-password\") {\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 19\n        }\n      }, \"Current Password\"), __jsx(\"input\", {\n        onChange: e => {\n          setucurrentPasswordField(e.target.value);\n        },\n        type: \"password\",\n        className: \"form-control\",\n        defaultValue: \"\",\n        placeholder: \"Enter your Current Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 19\n        }\n      })), __jsx(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 19\n        }\n      }, \"New Password\"), __jsx(\"input\", {\n        onChange: e => {\n          setunewPasswordField(e.target.value);\n        },\n        type: \"password\",\n        className: \"form-control\",\n        defaultValue: \"\",\n        placeholder: \"Enter your New Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 19\n        }\n      })));\n    } else if (props.dialogType === \"update-account\") {\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 17\n        }\n      }, __jsx(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 19\n        }\n      }, \"Current Password\"), __jsx(\"input\", {\n        onChange: e => {\n          setucurrentPasswordField(e.target.value);\n        },\n        type: \"password\",\n        className: \"form-control\",\n        defaultValue: \"\",\n        placeholder: \"Enter your Current Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 19\n        }\n      })));\n    } else if (props.dialogType === \"update-image\") {\n      return __jsx(UpdateImagePortrait, {\n        photoUrl: props.photoUrl,\n        imageFile: imageFile,\n        setimageFile: setimageFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 20\n        }\n      });\n    } else if (props.dialogType === \"withdraw\") {\n      return __jsx(WithdrawComponent, {\n        handleClose: handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 20\n        }\n      });\n    }\n  })()), props.dialogType !== \"withdraw\" && __jsx(DialogActions, {\n    style: {\n      marginTop: 10,\n      height: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 9\n    }\n  }, (() => {\n    if (loading) {\n      return __jsx(\"div\", {\n        style: {\n          width: 80\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 17\n        }\n      }, __jsx(CustomLoader, {\n        width: 25,\n        height: 25,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 19\n        }\n      }));\n    } else {\n      if (props.dialogType === \"export\") {\n        return __jsx(\"button\", {\n          type: \"button\",\n          className: \"btn btn-primary btn-small\",\n          onClick: handleClose,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 19\n          }\n        }, \"Close\");\n      } else {\n        return __jsx(\"button\", {\n          type: \"button\",\n          className: \"btn btn-primary btn-small\",\n          onClick: () => {\n            if (props.dialogType === \"update-username\") {\n              updateUsername();\n            } else if (props.dialogType === \"update-email\") {\n              updateUserEmail();\n            } else if (props.dialogType === \"update-password\") {\n              updateUserPassword();\n            } else if (props.dialogType === \"update-account\") {\n              updateUserAccount();\n            } else if (props.dialogType === \"update-image\") {\n              updateUserPhoto();\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 19\n          }\n        }, \"Update\");\n      }\n    }\n  })()), __jsx(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/home/mshahzaib/Desktop/upworkRobinKohzeProject/walletProject/wallet/components/profile/DynamicDialog.js"],"names":["React","useState","useRef","Dialog","DialogActions","DialogContent","Slide","firebase","CustomLoader","ToastContainer","toast","useRouter","updateUserDataAction","UpdateImagePortrait","useDispatch","useSelector","WithdrawComponent","Transition","forwardRef","props","ref","DynamicDialog","userNameField","setuserNameField","loading","setloading","emailField","setemailField","ucurrentPasswordField","setucurrentPasswordField","unewPasswordField","setunewPasswordField","imageFile","setimageFile","dispatch","router","handleClose","setdialogState","validateEmail","email","re","test","String","toLowerCase","updateUsername","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","updateUser","auth","currentUser","updateProfile","displayName","then","success","catch","message","updateUserEmail","pass","signInWithEmailAndPassword","userEmail","user","updateEmail","updateUserPassword","updatePassword","updateUserAccount","delete","push","updateUserPhoto","storage","modefiedURL","uid","child","put","originFileObj","setprofileImg","currentuser","photoURL","dialogState","zIndex","padding","dialogType","marginBottom","marginTop","color","e","target","value","photoUrl","height","width"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Slide from \"@material-ui/core/Slide\";\nimport firebase from \"../../config/fire-conf\";\nimport CustomLoader from \"../Layouts/CustomLoader\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { useRouter } from \"next/router\";\nimport { updateUserDataAction } from \"../../store/actions/actiosMain\";\nimport UpdateImagePortrait from \"./UpdateImagePortrait\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport WithdrawComponent from \"./WithdrawComponent\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function DynamicDialog(props) {\n  const [userNameField, setuserNameField] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [emailField, setemailField] = useState(\"\");\n  const [ucurrentPasswordField, setucurrentPasswordField] = useState(\"\");\n  const [unewPasswordField, setunewPasswordField] = useState(\"\");\n\n  const [imageFile, setimageFile] = useState([]);\n  const dispatch = useDispatch();\n  const router = useRouter();\n\n  const handleClose = () => {\n    props.setdialogState(false);\n  };\n\n  const validateEmail = (email) => {\n    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n\n  const updateUsername = () => {\n    setloading(true);\n    if (userNameField === \"\") {\n      toast.error(\"Please provide a Username\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n      setloading(false);\n    } else {\n      var updateUser = firebase.auth().currentUser;\n      updateUser\n        .updateProfile({\n          displayName: userNameField,\n        })\n        .then(() => {\n          toast.success(\"Username updated Successfully\", {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n          handleClose();\n          setuserNameField(\"\");\n        })\n        .catch(function(error) {\n          toast.error(error.message, {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n        });\n    }\n  };\n\n  const updateUserEmail = () => {\n    setloading(true);\n    let pass = true;\n\n    if (!validateEmail(emailField)) {\n      toast.error(\"Please provide a valid Email Address\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n      pass = false;\n    }\n    if (ucurrentPasswordField === \"\") {\n      toast.error(\"Please provide your current Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n      pass = false;\n    }\n\n    if (!pass) {\n      setloading(false);\n    } else {\n      //signning the user\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(props.userEmail, ucurrentPasswordField)\n        .then(() => {\n          //updating email\n          var user = firebase.auth().currentUser;\n          return user.updateEmail(emailField);\n        })\n        .then(() => {\n          // Update successful.\n          toast.success(\"User Email Updated Successfully\", {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n          handleClose();\n          setemailField(\"\");\n          setucurrentPasswordField(\"\");\n        })\n        .catch((error) => {\n          toast.error(error.message, {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n        });\n    }\n  };\n\n  const updateUserPassword = () => {\n    setloading(true);\n    let pass = true;\n\n    if (unewPasswordField === \"\") {\n      toast.error(\"Please provide your new Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n      pass = false;\n    }\n    if (ucurrentPasswordField === \"\") {\n      toast.error(\"Please provide your current Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n      pass = false;\n    }\n\n    if (!pass) {\n      setloading(false);\n    } else {\n      //signning the user\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(props.userEmail, ucurrentPasswordField)\n        .then(() => {\n          //updating email\n          var user = firebase.auth().currentUser;\n          return user.updatePassword(unewPasswordField);\n        })\n        .then(() => {\n          // Update successful.\n          toast.success(\"User Password Updated Successfully\", {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n          handleClose();\n          setunewPasswordField(\"\");\n          setucurrentPasswordField(\"\");\n        })\n        .catch((error) => {\n          toast.error(error.message, {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n        });\n    }\n  };\n\n  const updateUserAccount = () => {\n    setloading(true);\n    let pass = true;\n\n    if (ucurrentPasswordField === \"\") {\n      toast.error(\"Please provide your current Password\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n      pass = false;\n    }\n\n    if (!pass) {\n      setloading(false);\n    } else {\n      //signning the user\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(props.userEmail, ucurrentPasswordField)\n        .then(() => {\n          //updating email\n          var user = firebase.auth().currentUser;\n          return user.delete();\n        })\n        .then(() => {\n          // Update successful.\n          toast.success(\"User Account Deleted Successfully\", {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n          handleClose();\n          setucurrentPasswordField(\"\");\n          dispatch(updateUserDataAction(null));\n          router.push(\"/\");\n        })\n        .catch((error) => {\n          toast.error(error.message, {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n          setloading(false);\n        });\n    }\n  };\n\n  const updateUserPhoto = async () => {\n    setloading(true);\n    let pass = true;\n    if (imageFile[0]) {\n      //pushing image to DB\n      let storage = firebase.storage();\n      let modefiedURL = `https://firebasestorage.googleapis.com/v0/b/vaionexdev.appspot.com/o/profile_images%2F${props.uid}?alt=media`;\n\n      await storage\n        .ref()\n        .child(`profile_images/${props.uid}`)\n        .put(imageFile[0].originFileObj);\n\n      props.setprofileImg(modefiedURL);\n\n      let currentuser = firebase.auth().currentUser;\n      currentuser\n        .updateProfile({\n          photoURL: modefiedURL,\n        })\n        .then(function() {\n          setloading(false);\n          handleClose();\n\n          toast.success(\"Image Uploaded Succesfully\", {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n        })\n        .catch((error) => {\n          setloading(false);\n          toast.error(\"Error Occured!\", {\n            position: \"bottom-left\",\n            autoClose: 10000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          });\n        });\n    } else {\n      setloading(false);\n      toast.error(\"Please provide Profile Image\", {\n        position: \"bottom-left\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  return (\n    <Dialog\n      open={props.dialogState}\n      TransitionComponent={Transition}\n      keepMounted\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-slide-title\"\n      aria-describedby=\"alert-dialog-slide-description\"\n      fullWidth\n      style={{ zIndex: 100 }}\n      maxWidth=\"sm\"\n    >\n      <h5 style={{ padding: \"18px 24px 5px 24px\" }}>\n        {(() => {\n          if (props.dialogType === \"export\") {\n            return \"Backup Your Wallet\";\n          } else if (props.dialogType === \"update-username\") {\n            return \"Update UserName\";\n          } else if (props.dialogType === \"update-email\") {\n            return \"Update Email\";\n          } else if (props.dialogType === \"update-password\") {\n            return \"Update Password\";\n          } else if (props.dialogType === \"update-account\") {\n            return \"Delete Account\";\n          } else if (props.dialogType === \"update-image\") {\n            return \"Add an account photo\";\n          } else if (props.dialogType === \"withdraw\") {\n            return \"Withdraw Amount\";\n          }\n        })()}\n      </h5>\n      <DialogContent>\n        {(() => {\n          if (props.dialogType === \"export\") {\n            return (\n              <>\n                <p style={{ marginBottom: \"0.2rem\" }}>Please write down your backup phrase to secure your wallet.</p>\n                <p style={{ marginTop: 0, color: \"#0e314c\" }}>rent all smooth flame increase ketchup catalog moon room wasp twice media</p>\n              </>\n            );\n          } else if (props.dialogType === \"update-username\") {\n            return (\n              <>\n                <div className=\"form-group\">\n                  <label>UserName</label>\n                  <input\n                    onChange={(e) => {\n                      setuserNameField(e.target.value);\n                    }}\n                    type=\"text\"\n                    className=\"form-control\"\n                    defaultValue=\"\"\n                    placeholder=\"Enter your Display Name\"\n                    required\n                  />\n                </div>\n              </>\n            );\n          } else if (props.dialogType === \"update-email\") {\n            return (\n              <>\n                <div className=\"form-group\">\n                  <label>New Email</label>\n                  <input\n                    onChange={(e) => {\n                      setemailField(e.target.value);\n                    }}\n                    type=\"email\"\n                    className=\"form-control\"\n                    defaultValue=\"\"\n                    placeholder=\"Enter your New Email Address\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Current Password</label>\n                  <input\n                    onChange={(e) => {\n                      setucurrentPasswordField(e.target.value);\n                    }}\n                    type=\"password\"\n                    className=\"form-control\"\n                    defaultValue=\"\"\n                    placeholder=\"Enter your Password\"\n                  />\n                </div>\n              </>\n            );\n          } else if (props.dialogType === \"update-password\") {\n            return (\n              <>\n                <div className=\"form-group\">\n                  <label>Current Password</label>\n                  <input\n                    onChange={(e) => {\n                      setucurrentPasswordField(e.target.value);\n                    }}\n                    type=\"password\"\n                    className=\"form-control\"\n                    defaultValue=\"\"\n                    placeholder=\"Enter your Current Password\"\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>New Password</label>\n                  <input\n                    onChange={(e) => {\n                      setunewPasswordField(e.target.value);\n                    }}\n                    type=\"password\"\n                    className=\"form-control\"\n                    defaultValue=\"\"\n                    placeholder=\"Enter your New Password\"\n                  />\n                </div>\n              </>\n            );\n          } else if (props.dialogType === \"update-account\") {\n            return (\n              <>\n                <div className=\"form-group\">\n                  <label>Current Password</label>\n                  <input\n                    onChange={(e) => {\n                      setucurrentPasswordField(e.target.value);\n                    }}\n                    type=\"password\"\n                    className=\"form-control\"\n                    defaultValue=\"\"\n                    placeholder=\"Enter your Current Password\"\n                  />\n                </div>\n              </>\n            );\n          } else if (props.dialogType === \"update-image\") {\n            return <UpdateImagePortrait photoUrl={props.photoUrl} imageFile={imageFile} setimageFile={setimageFile} />;\n          } else if (props.dialogType === \"withdraw\") {\n            return <WithdrawComponent handleClose={handleClose} />;\n          }\n        })()}\n      </DialogContent>\n      {props.dialogType !== \"withdraw\" && (\n        <DialogActions style={{ marginTop: 10, height: 50 }}>\n          {(() => {\n            if (loading) {\n              return (\n                <div style={{ width: 80 }}>\n                  <CustomLoader width={25} height={25} />\n                </div>\n              );\n            } else {\n              if (props.dialogType === \"export\") {\n                return (\n                  <button type=\"button\" className=\"btn btn-primary btn-small\" onClick={handleClose}>\n                    Close\n                  </button>\n                );\n              } else {\n                return (\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-primary btn-small\"\n                    onClick={() => {\n                      if (props.dialogType === \"update-username\") {\n                        updateUsername();\n                      } else if (props.dialogType === \"update-email\") {\n                        updateUserEmail();\n                      } else if (props.dialogType === \"update-password\") {\n                        updateUserPassword();\n                      } else if (props.dialogType === \"update-account\") {\n                        updateUserAccount();\n                      } else if (props.dialogType === \"update-image\") {\n                        updateUserPhoto();\n                      }\n                    }}\n                  >\n                    Update\n                  </button>\n                );\n              }\n            }\n          })()}\n        </DialogActions>\n      )}\n      <ToastContainer />\n    </Dialog>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}